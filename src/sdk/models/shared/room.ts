/*
 * Code generated by Speakeasy (https://speakeasyapi.dev). DO NOT EDIT.
 */

import { SpeakeasyBase, SpeakeasyMetadata } from "../../../internal/utils";
import { RoomAllocation } from "./roomallocation";
import { RoomStatus } from "./roomstatus";
import { Expose, Transform, Type } from "class-transformer";

/**
 * Metadata on allocated instances of a room.
 */
export class CurrentAllocation extends SpeakeasyBase {
    /**
     * System generated unique identifier to a runtime instance of your game server.
     */
    @SpeakeasyMetadata()
    @Expose({ name: "processId" })
    processId: string;

    /**
     * System generated unique identifier to an allocated instance of a room.
     */
    @SpeakeasyMetadata()
    @Expose({ name: "roomAllocationId" })
    roomAllocationId: string;

    @SpeakeasyMetadata()
    @Expose({ name: "scheduledAt" })
    @Transform(({ value }) => new Date(value), { toClassOnly: true })
    scheduledAt: Date;

    @SpeakeasyMetadata()
    @Expose({ name: "unscheduledAt" })
    @Transform(({ value }) => new Date(value), { toClassOnly: true })
    unscheduledAt: Date;
}

/**
 * A room object represents a game session or match.
 */
export class Room extends SpeakeasyBase {
    @SpeakeasyMetadata({ elemType: RoomAllocation })
    @Expose({ name: "allocations" })
    @Type(() => RoomAllocation)
    allocations: RoomAllocation[];

    /**
     * System generated unique identifier for an application.
     */
    @SpeakeasyMetadata()
    @Expose({ name: "appId" })
    appId: string;

    @SpeakeasyMetadata()
    @Expose({ name: "currentAllocation" })
    @Type(() => CurrentAllocation)
    currentAllocation: CurrentAllocation;

    /**
     * Unique identifier to a game session or match. Use either a system generated ID or pass in your own.
     */
    @SpeakeasyMetadata()
    @Expose({ name: "roomId" })
    roomId: string;

    /**
     * The allocation status of a room.
     *
     * @remarks
     *
     * `scheduling`: a process is not allocated yet and the room is waiting to be scheduled
     *
     * `active`: ready to accept connections
     *
     * `suspended`: room is unallocated from the process but can be rescheduled later with the same `roomId`
     *
     * `destroyed`: all associated metadata is deleted
     */
    @SpeakeasyMetadata()
    @Expose({ name: "status" })
    status: RoomStatus;
}
