/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import { buildsV2CreateBuild } from "../funcs/buildsV2CreateBuild.js";
import { buildsV2CreateBuildWithUploadUrl } from "../funcs/buildsV2CreateBuildWithUploadUrl.js";
import { buildsV2DeleteBuild } from "../funcs/buildsV2DeleteBuild.js";
import { buildsV2GetBuildInfo } from "../funcs/buildsV2GetBuildInfo.js";
import { buildsV2GetBuilds } from "../funcs/buildsV2GetBuilds.js";
import { buildsV2RunBuild } from "../funcs/buildsV2RunBuild.js";
import { ClientSDK, RequestOptions } from "../lib/sdks.js";
import * as components from "../models/components/index.js";
import * as operations from "../models/operations/index.js";
import { unwrapAsync } from "../types/fp.js";

export class BuildsV2 extends ClientSDK {
    /**
     * Returns an array of [builds](https://hathora.dev/docs/concepts/hathora-entities#build) for an [application](https://hathora.dev/docs/concepts/hathora-entities#application).
     */
    async getBuilds(
        appId?: string | undefined,
        options?: RequestOptions
    ): Promise<Array<components.Build>> {
        return unwrapAsync(buildsV2GetBuilds(this, appId, options));
    }

    /**
     * Get details for a [build](https://hathora.dev/docs/concepts/hathora-entities#build).
     */
    async getBuildInfo(
        buildId: number,
        appId?: string | undefined,
        options?: RequestOptions
    ): Promise<components.Build> {
        return unwrapAsync(buildsV2GetBuildInfo(this, buildId, appId, options));
    }

    /**
     * Creates a new [build](https://hathora.dev/docs/concepts/hathora-entities#build). Responds with a `buildId` that you must pass to [`RunBuild()`](https://hathora.dev/api#tag/BuildV1/operation/RunBuild) to build the game server artifact. You can optionally pass in a `buildTag` to associate an external version with a build.
     */
    async createBuild(
        createBuildParams: components.CreateBuildParams,
        appId?: string | undefined,
        options?: RequestOptions
    ): Promise<components.Build> {
        return unwrapAsync(buildsV2CreateBuild(this, createBuildParams, appId, options));
    }

    /**
     * Creates a new [build](https://hathora.dev/docs/concepts/hathora-entities#build) with optional `uploadUrl` that can be used to upload the build to before calling `runBuild`. Responds with a `buildId` that you must pass to [`RunBuild()`](https://hathora.dev/api#tag/BuildV1/operation/RunBuild) to build the game server artifact. You can optionally pass in a `buildTag` to associate an external version with a build.
     */
    async createBuildWithUploadUrl(
        createBuildParams: components.CreateBuildParams,
        appId?: string | undefined,
        options?: RequestOptions
    ): Promise<components.BuildWithUploadUrl> {
        return unwrapAsync(
            buildsV2CreateBuildWithUploadUrl(this, createBuildParams, appId, options)
        );
    }

    /**
     * Delete a [build](https://hathora.dev/docs/concepts/hathora-entities#build). All associated metadata is deleted.
     */
    async deleteBuild(
        buildId: number,
        appId?: string | undefined,
        options?: RequestOptions
    ): Promise<void> {
        return unwrapAsync(buildsV2DeleteBuild(this, buildId, appId, options));
    }

    /**
     * Builds a game server artifact from a tarball you provide. Pass in the `buildId` generated from [`CreateBuild()`](https://hathora.dev/api#tag/BuildV1/operation/CreateBuild).
     */
    async runBuild(
        buildId: number,
        requestBody: operations.RunBuildRequestBody,
        appId?: string | undefined,
        options?: RequestOptions
    ): Promise<ReadableStream<Uint8Array>> {
        return unwrapAsync(buildsV2RunBuild(this, buildId, requestBody, appId, options));
    }
}
